--DEBUT DU REPORT DES SCRIPTS DE LA BRANCHE 1.17.1-4-ISO20022
--consolidation RC01 et RC02

--retrait du choix des type d'og 
delete from SCHEMA.fwcoup where pcosid in(select pcosid from SCHEMA.fwcosp where pptygr ='OSIOGTYA');
delete from SCHEMA.fwcosp where pptygr ='OSIOGTYA';

--fin de consolidation RC01 et RC02

insert into SCHEMA.fwcosp (pcosid,pptygr,pconcs,pptycn,pptycl,pptysa,pcosli,pcosdf,pcosdm,pcosdp,pcoian,pcoide,pcodfi,pcoitc,pcoise,pspy) values (211003,'OSIOGRBVR',1,1,0,0,'BVR_camt054',2, 2,2,2,2,2,10200011,0,'spy');
insert into SCHEMA.fwcoup (pcosid,plaide,pcouid,pcolut,pspy) values (211003,'D','ES054','ESR camt054','spy');
insert into SCHEMA.fwcoup (pcosid,plaide,pcouid,pcolut,pspy) values (211003,'F','BV054','BVR camt054','spy');

create table schema.CAYRFI(
	YRFIID NUMERIC(15,0) NOT NULL PRIMARY KEY,
	YRFIFN VARCHAR(255) NOT NULL,
	YRFITY VARCHAR(255) NOT NULL,
	YRFIST VARCHAR(50) NOT NULL,
	YRFIRE VARCHAR(255),
	YRFIDC NUMERIC(15,0) NOT NULL,
	YRFIIB VARCHAR(255),
	PSPY CHAR(24) NOT NULL
);
INSERT INTO SCHEMA.FWINCP (PINCID, PCOSID, PINCAN, PINCLI, PINCVA, PSPY) VALUES ('CAYRFI', 0, 0, '', 1, '20170116100000globazf');

create table schema.CAYRIF(
	YRIFID NUMERIC(15,0) NOT NULL PRIMARY KEY,
	YRIFFN VARCHAR(255) NOT NULL,
	YRIFDC NUMERIC(15,0) NOT NULL,
	PSPY CHAR(24) NOT NULL
);
INSERT INTO SCHEMA.FWINCP (PINCID, PCOSID, PINCAN, PINCLI, PINCVA, PSPY) VALUES ('CAYRIF', 0, 0, '', 1, '20170116100000globazf');

create table schema.CAJOISO(
	JOISOID	NUMERIC(15,0) NOT NULL PRIMARY KEY,
	JOISOIJ NUMERIC(15,0) NOT NULL,
	JOISOME VARCHAR(255) NOT NULL,
	JOISODT VARCHAR(255) NOT NULL,
	JOISONT VARCHAR(255) NOT NULL,
	JOISOFN VARCHAR(255) NOT NULL,
	PSPY CHAR(24) NOT NULL
);
INSERT INTO SCHEMA.FWINCP (PINCID, PCOSID, PINCAN, PINCLI, PINCVA, PSPY) VALUES ('CAJOISO', 0, 0, '', 1, '20170116100000globazf');

alter table SCHEMA.CAOPBVP add column ACCTSVCRREF VARCHAR(255);
alter table SCHEMA.CAOPBVP add column BKTXCD VARCHAR(255);
alter table SCHEMA.CAOPBVP add column DBTR VARCHAR(255);
reorg table SCHEMA.CAOPBVP;

alter table SCHEMA.CAORGRP drop column ISOTYPEAVIS;
reorg table SCHEMA.CAORGRP;


--recréation de la table des rejet OSIRIS
DROP TABLE SCHEMA.CAORREJ;
CREATE TABLE SCHEMA.CAORREJ (
	IDORRE NUMERIC(9,0) primary key not null,
	IDORDR NUMERIC(9,0) not null,
	IDORGR NUMERIC(9,0) NOT NULL,
	CODE VARCHAR(32),
	PROPRI VARCHAR(255),
	ADDITI VARCHAR(255),
	PSPY CHAR(24)
	);

UPDATE SCHEMA.FWCOUP SET PCOLUT = 'généré' WHERE PCOSID = 208005 AND PLAIDE = 'F';
UPDATE SCHEMA.FWCOUP SET PCOLUT = 'zu übermitteln' WHERE PCOSID = 262001 AND PLAIDE = 'D';
UPDATE SCHEMA.FWCOUP SET PCOLUT = 'übermittelt' WHERE PCOSID = 262002 AND PLAIDE = 'D';
UPDATE SCHEMA.FWCOUP SET PCOLUT = 'bestätigt' WHERE PCOSID = 262003 AND PLAIDE = 'D';

--FIN DU REPORT DES SCRIPTS DE LA BRANCHE 1.17.1-4-ISO20022

INSERT INTO SCHEMA.JADEPROP (PROPNAME, PROPVAL) VALUES ('osiris.recalcul.soldes.compteAnnexe.section', 'true');

